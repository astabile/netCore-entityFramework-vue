(function(t){function e(e){for(var o,r,n=e[0],l=e[1],c=e[2],v=0,u=[];v<n.length;v++)r=n[v],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&u.push(i[r][0]),i[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);d&&d(e);while(u.length)u.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],o=!0,n=1;n<a.length;n++){var l=a[n];0!==i[l]&&(o=!1)}o&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var o={},i={app:0},s=[];function r(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=o,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(a,o,function(e){return t[e]}.bind(null,o));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var d=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"02d6":function(t,e,a){"use strict";var o=a("b260"),i=a.n(o);i.a},4678:function(t,e,a){var o={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"73332","./en-il.js":"73332","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=s(t);return a(e)}function s(t){if(!a.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}i.keys=function(){return Object.keys(o)},i.resolve=s,t.exports=i,i.id="4678"},5437:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e792");var o=a("2b0e"),i=a("d437"),s=a.n(i),r=a("d421"),n=a.n(r),l=a("535c"),c=a.n(l),d=a("d0ba"),v=a.n(d),u=a("e1f0"),m=a.n(u),_=a("5d92"),h=a.n(_),p=a("6a6f"),f=a.n(p),b=a("d553"),x=a.n(b),g=a("12d0"),k=a.n(g),C=a("c713"),A=a.n(C),y=a("68d6"),j=a.n(y),M=a("cf3f"),I=a.n(M),w=a("db3b"),D=a.n(w),N=a("46db"),S=a.n(N),$=a("3ace"),P=a.n($),z=a("2330"),B=a.n(z);a("da64");o["default"].use(s.a,{components:{VApp:n.a,VNavigationDrawer:c.a,VFooter:v.a,VList:m.a,VBtn:h.a,VIcon:f.a,VGrid:x.a,VToolbar:k.a,VCard:A.a,VDivider:j.a,VDialog:I.a,VTextField:D.a,VDataTable:S.a,VSelect:P.a,transitions:B.a},theme:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}});var T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"app"}},[t.logueado?a("v-navigation-drawer",{attrs:{fixed:"",clipped:t.$vuetify.breakpoint.mdAndUp,app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[t.esAdministrador||t.esAlmacenero||t.esVendedor?[a("v-list-tile",{attrs:{to:{name:"home"}}},[a("v-list-tile-action",[a("v-icon",[t._v("home")])],1),t._v(" "),a("v-list-tile-title",[t._v("Inicio")])],1)]:t._e(),t._v(" "),t.esAdministrador||t.esAlmacenero?[a("v-list-group",[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("Tienda")])],1)],1),t._v(" "),a("v-list-tile",{attrs:{to:{name:"categorias"}}},[a("v-list-tile-action",[a("v-icon",[t._v("category")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Categorías")])],1)],1),t._v(" "),a("v-list-tile",{attrs:{to:{name:"articulos"}}},[a("v-list-tile-action",[a("v-icon",[t._v("local_grocery_store")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Artículos")])],1)],1)],1)]:t._e(),t._v(" "),t.esAdministrador||t.esAlmacenero?[a("v-list-group",[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("Compras")])],1)],1),t._v(" "),a("v-list-tile",{attrs:{to:{name:"ingresos"}}},[a("v-list-tile-action",[a("v-icon",[t._v("attach_money")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Ingresos")])],1)],1),t._v(" "),a("v-list-tile",{attrs:{to:{name:"proveedores"}}},[a("v-list-tile-action",[a("v-icon",[t._v("people")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Proveedores")])],1)],1)],1)]:t._e(),t._v(" "),t.esAdministrador||t.esVendedor?[a("v-list-group",[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("Ventas")])],1)],1),t._v(" "),a("v-list-tile",{attrs:{to:{name:"ventas"}}},[a("v-list-tile-action",[a("v-icon",[t._v("credit_card")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Ventas")])],1)],1),t._v(" "),a("v-list-tile",{attrs:{to:{name:"clientes"}}},[a("v-list-tile-action",[a("v-icon",[t._v("supervised_user_circle")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Clientes")])],1)],1)],1)]:t._e(),t._v(" "),t.esAdministrador?[a("v-list-group",[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("Accesos")])],1)],1),t._v(" "),a("v-list-tile",{attrs:{to:{name:"roles"}}},[a("v-list-tile-action",[a("v-icon",[t._v("pan_tool")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Roles")])],1)],1),t._v(" "),a("v-list-tile",{attrs:{to:{name:"usuarios"}}},[a("v-list-tile-action",[a("v-icon",[t._v("person")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Usuarios")])],1)],1)],1)]:t._e(),t._v(" "),t.esAdministrador?[a("v-list-group",[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("Consultas")])],1)],1),t._v(" "),a("v-list-tile",{attrs:{to:{name:"consultas"}}},[a("v-list-tile-action",[a("v-icon",[t._v("show_chart")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Historial de ventas")])],1)],1)],1)]:t._e()],2)],1):t._e(),t._v(" "),a("v-toolbar",{attrs:{color:"blue darken-3",dark:"",app:"","clipped-left":t.$vuetify.breakpoint.mdAndUp,fixed:""}},[a("v-toolbar-title",{staticClass:"ml-0 pl-3",staticStyle:{width:"300px"}},[a("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t._v(" "),a("span",{staticClass:"hidden-sm-and-down"},[t._v("Sistema")])],1),t._v(" "),a("v-spacer"),t._v(" "),t.logueado?a("span",[t._v(t._s(this.$store.state.usuario.nombre))]):t._e(),t._v(" "),t.logueado?a("v-btn",{attrs:{icon:""},on:{click:t.salir}},[a("v-icon",[t._v("logout")])],1):t._e()],1),t._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-slide-y-transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1)],1),t._v(" "),a("v-footer",{attrs:{dark:"",height:"auto"}},[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-card",{staticClass:"white--text",attrs:{flat:"",tile:"",color:"primary"}},[a("v-card-text",{staticClass:"white--text pt-0"},[t._v("© 2020")])],1)],1)],1)],1)],1)},E=[],F={name:"App",data:function(){return{clipped:!1,drawer:!0,fixed:!1,items:[{icon:"bubble_chart",title:"Inspire"}],miniVariant:!1,right:!0,rightDrawer:!1,title:"Vuetify.js"}},computed:{logueado:function(){return this.$store.state.usuario},esAdministrador:function(){return this.$store.state.usuario&&"Administrador"==this.$store.state.usuario.rol},esAlmacenero:function(){return this.$store.state.usuario&&"Almacenero"==this.$store.state.usuario.rol},esVendedor:function(){return this.$store.state.usuario&&"Vendedor"==this.$store.state.usuario.rol}},created:function(){this.$store.dispatch("autoLogin")},methods:{salir:function(){this.$store.dispatch("salir")}}},O=F,V=a("2877"),L=Object(V["a"])(O,T,E,!1,null,null,null),U=L.exports,Y=a("8c4f"),q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"grid-list-m":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("div",[a("canvas",{attrs:{id:"myChart"}})])])],1)],1)},G=[],R=a("bc3a"),K=a.n(R),J=a("30ef"),H=a.n(J),W={data:function(){return{mesesValores:null,nombreMeses:[],totalMeses:[]}},methods:{loadProductosMasVendidos:function(){var t=this,e="";t.mesesValores.map((function(a){switch(a.etiqueta){case 1:e="Enero";break;case 2:e="Febrero";break;case 3:e="Marzo";break;case 4:e="Abril";break;case 5:e="Mayo";break;case 6:e="Junio";break;case 7:e="Julio";break;case 8:e="Agosto";break;case 9:e="Septiembre";break;case 10:e="Octubre";break;case 11:e="Noviembre";break;case 12:e="Diciembre";break;default:e="Error"}t.nombreMeses.push(e),t.totalMeses.push(a.valor)}));var a=document.getElementById("myChart");new H.a(a,{type:"bar",data:{labels:t.nombreMeses,datasets:[{label:"Ventas en los últimos 12 meses",data:t.totalMeses,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})},getProductosMasVendidos:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e};K.a.get("api/Ventas/ListarVentas",a).then((function(e){t.mesesValores=e.data,t.loadProductosMasVendidos()})).catch((function(t){console.log(t)}))}},mounted:function(){this.getProductosMasVendidos()}},Z=W,Q=Object(V["a"])(Z,q,G,!1,null,null,null),X=Q.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Categorías")]),t._v(" "),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-btn",{staticClass:"mb-2",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("Nuevo")]),t._v(" "),a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Nombre"},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Descripción"},model:{value:t.descripcion,callback:function(e){t.descripcion=e},expression:"descripcion"}})],1),t._v(" "),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})))],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.close(e)}}},[t._v("Cancelar")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.guardar(e)}}},[t._v("Guardar")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("¿Activar Item?")]):t._e(),t._v(" "),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("¿Desactivar Item?")]):t._e(),t._v(" "),a("v-card-text",[t._v("\n                            Estás a punto de \n                            "),1==t.adAccion?a("span",[t._v("Activar ")]):t._e(),t._v(" "),2==t.adAccion?a("span",[t._v("Desactivar ")]):t._e(),t._v("\n                            el ítem "+t._s(t.adNombre)+"\n                        ")]),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:t.activarDesactivarCerrar}},[t._v("\n                                Cancelar\n                            ")]),t._v(" "),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:t.activar}},[t._v("\n                                Activar\n                            ")]):t._e(),t._v(" "),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:t.desactivar}},[t._v("\n                                Desactivar\n                            ")]):t._e()],1)],1)],1)],1),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.categorias,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){t.editItem(e.item)}}},[t._v("\n                    edit\n                    ")]),t._v(" "),e.item.condicion?[a("v-icon",{attrs:{small:""},on:{click:function(a){t.activarDesactivarMostrar(2,e.item)}}},[t._v("\n                        block\n                        ")])]:[a("v-icon",{attrs:{small:""},on:{click:function(a){t.activarDesactivarMostrar(1,e.item)}}},[t._v("\n                        check\n                        ")])]],2),t._v(" "),a("td",[t._v(t._s(e.item.nombre))]),t._v(" "),a("td",[t._v(t._s(e.item.descripcion))]),t._v(" "),a("td",[e.item.condicion?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])])]}}])},[a("template",{slot:"no-data"},[a("v-btn",{attrs:{outline:"",color:"primary"},on:{click:t.listar}},[t._v("Actualizar")])],1)],2)],1)],1)},et=[],at={data:function(){return{categorias:[],dialog:!1,headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Nombre",value:"nombre"},{text:"Descripción",value:"descripcion",sortable:!1},{text:"Estado",value:"condicion",sortable:!1}],search:"",editedIndex:-1,id:"",nombre:"",descripcion:"",valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nueva categoría":"Actualizar categoría"}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar()},methods:{listar:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e};K.a.get("api/Categorias/Listar",a).then((function(e){t.categorias=e.data})).catch((function(t){console.log(t)}))},editItem:function(t){this.id=t.idcategoria,this.nombre=t.nombre,this.descripcion=t.descripcion,this.editedIndex=1,this.dialog=!0},deleteItem:function(t){var e=this.desserts.indexOf(t);confirm("Are you sure you want to delete this item?")&&this.desserts.splice(e,1)},close:function(){this.dialog=!1,this.limpiar()},limpiar:function(){this.id="",this.nombre="",this.descripcion="",this.editedIndex=-1},guardar:function(){if(!this.validar()){var t={Authorization:"Bearer "+this.$store.state.token},e={headers:t};if(this.editedIndex>-1){var a=this;K.a.put("api/Categorias/Actualizar",{idcategoria:a.id,nombre:a.nombre,descripcion:a.descripcion},e).then((function(t){a.close(),a.listar(),a.limpiar()})).catch((function(t){console.log(t)}))}else{var o=this;K.a.post("api/Categorias/Crear",{nombre:o.nombre,descripcion:o.descripcion},e).then((function(t){o.close(),o.listar(),o.limpiar()})).catch((function(t){console.log(t)}))}}},validar:function(){return this.valida=0,this.validaMensaje=[],(this.nombre.length<3||this.nombre.length>50)&&this.validaMensaje.push("El nombre debe tener más de 3 caracteres y menos de 50 caracteres"),this.validaMensaje.length&&(this.valida=1),this.valida},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.nombre,this.adId=e.idcategoria,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e};K.a.put("api/Categorias/Activar/"+this.adId,{},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e};K.a.put("api/Categorias/Desactivar/"+this.adId,{},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))}}},ot=at,it=Object(V["a"])(ot,tt,et,!1,null,null,null),st=it.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-btn",{on:{click:function(e){t.crearPDF()}}},[a("v-icon",[t._v("print")])],1),t._v(" "),a("v-toolbar-title",[t._v("Artículos")]),t._v(" "),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-btn",{staticClass:"mb-2",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("Nuevo")]),t._v(" "),a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs6:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Código"},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1),t._v(" "),a("v-flex",{attrs:{xs6:"",sm6:"",md6:""}},[a("v-select",{attrs:{items:t.categorias,label:"Categoría"},model:{value:t.idcategoria,callback:function(e){t.idcategoria=e},expression:"idcategoria"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Nombre"},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}})],1),t._v(" "),a("v-flex",{attrs:{xs6:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{type:"number",label:"Stock"},model:{value:t.stock,callback:function(e){t.stock=e},expression:"stock"}})],1),t._v(" "),a("v-flex",{attrs:{xs6:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{type:"number",label:"Precio"},model:{value:t.precio_venta,callback:function(e){t.precio_venta=e},expression:"precio_venta"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Descripción"},model:{value:t.descripcion,callback:function(e){t.descripcion=e},expression:"descripcion"}})],1),t._v(" "),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})))],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.close(e)}}},[t._v("Cancelar")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.guardar(e)}}},[t._v("Guardar")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("¿Activar Item?")]):t._e(),t._v(" "),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("¿Desactivar Item?")]):t._e(),t._v(" "),a("v-card-text",[t._v("\n            Estás a punto de\n            "),1==t.adAccion?a("span",[t._v("Activar")]):t._e(),t._v(" "),2==t.adAccion?a("span",[t._v("Desactivar")]):t._e(),t._v("\n            el ítem "+t._s(t.adNombre)+"\n          ")]),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:t.activarDesactivarCerrar}},[t._v("Cancelar")]),t._v(" "),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:t.activar}},[t._v("Activar")]):t._e(),t._v(" "),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:t.desactivar}},[t._v("Desactivar")]):t._e()],1)],1)],1)],1),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.articulos,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){t.editItem(e.item)}}},[t._v("edit")]),t._v(" "),e.item.condicion?[a("v-icon",{attrs:{small:""},on:{click:function(a){t.activarDesactivarMostrar(2,e.item)}}},[t._v("block")])]:[a("v-icon",{attrs:{small:""},on:{click:function(a){t.activarDesactivarMostrar(1,e.item)}}},[t._v("check")])]],2),t._v(" "),a("td",[t._v(t._s(e.item.codigo))]),t._v(" "),a("td",[t._v(t._s(e.item.nombre))]),t._v(" "),a("td",[t._v(t._s(e.item.categoria))]),t._v(" "),a("td",[t._v(t._s(e.item.stock))]),t._v(" "),a("td",[t._v(t._s(e.item.precio_venta))]),t._v(" "),a("td",[t._v(t._s(e.item.descripcion))]),t._v(" "),a("td",[e.item.condicion?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])])]}}])},[a("template",{slot:"no-data"},[a("v-btn",{attrs:{outline:"",color:"primary"},on:{click:t.listar}},[t._v("Actualizar")])],1)],2)],1)],1)},nt=[],lt=a("e511"),ct=a.n(lt),dt=(a("0da4"),{data:function(){return{articulos:[],dialog:!1,headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Código",value:"codigo"},{text:"Nombre",value:"nombre"},{text:"Categoría",value:"categoria"},{text:"Stock",value:"stock",sortable:!1},{text:"Precio",value:"precio_venta",sortable:!1},{text:"Descripción",value:"descripcion",sortable:!1},{text:"Estado",value:"condicion",sortable:!1}],search:"",editedIndex:-1,id:"",idcategoria:"",categorias:[],codigo:"",nombre:"",stock:0,precio_venta:0,descripcion:"",valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo artículo":"Actualizar artículo"}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar(),this.select()},methods:{crearPDF:function(){var t=[{title:"Nombre",dataKey:"nombre"},{title:"Código",dataKey:"codigo"},{title:"Categoría",dataKey:"categoria"},{title:"Stock",dataKey:"stock"},{title:"Precio",dataKey:"precio_venta"}],e=[];this.articulos.map((function(t){e.push({nombre:t.nombre,codigo:t.codigo,categoria:t.categoria,stock:t.stock,precio_venta:t.precio_venta})}));var a=new ct.a("p","pt");a.autoTable(t,e,{margin:{top:60},addPageContent:function(t){a.text("Artículos",40,30)}}),a.save("Articulos.pdf")},listar:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e};K.a.get("api/Articulos/Listar",a).then((function(e){t.articulos=e.data})).catch((function(t){console.log(t)}))},select:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e},o=[];K.a.get("api/Categorias/Select",a).then((function(e){o=e.data,o.map((function(e){t.categorias.push({text:e.nombre,value:e.idcategoria})}))})).catch((function(t){console.log(t)}))},editItem:function(t){this.id=t.idarticulo,this.idcategoria=t.idcategoria,this.codigo=t.codigo,this.nombre=t.nombre,this.stock=t.stock,this.precio_venta=t.precio_venta,this.descripcion=t.descripcion,this.editedIndex=1,this.dialog=!0},close:function(){this.dialog=!1,this.limpiar()},limpiar:function(){this.id="",this.idcategoria="",this.codigo="",this.nombre="",this.stock="",this.precio_venta="",this.descripcion="",this.editedIndex=-1},guardar:function(){if(!this.validar()){var t={Authorization:"Bearer "+this.$store.state.token},e={headers:t};if(this.editedIndex>-1){var a=this;K.a.put("api/Articulos/Actualizar",{idarticulo:a.id,idcategoria:a.idcategoria,codigo:a.codigo,nombre:a.nombre,stock:a.stock,precio_venta:a.precio_venta,descripcion:a.descripcion},e).then((function(t){a.close(),a.listar(),a.limpiar()})).catch((function(t){console.log(t)}))}else{var o=this;K.a.post("api/Articulos/Crear",{idcategoria:o.idcategoria,codigo:o.codigo,nombre:o.nombre,stock:o.stock,precio_venta:o.precio_venta,descripcion:o.descripcion},e).then((function(t){o.close(),o.listar(),o.limpiar()})).catch((function(t){console.log(t)}))}}},validar:function(){return this.valida=0,this.validaMensaje=[],(this.nombre.length<3||this.nombre.length>50)&&this.validaMensaje.push("El nombre debe tener más de 3 caracteres y menos de 50 caracteres."),this.idcategoria||this.validaMensaje.push("Seleccione una categoría."),this.stock&&0!=this.stock||this.validaMensaje.push("Ingrese el stock inicial del artículo."),this.precio_venta&&0!=this.precio_venta||this.validaMensaje.push("Ingrese el precio de venta del artículo."),this.validaMensaje.length&&(this.valida=1),this.valida},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.nombre,this.adId=e.idarticulo,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e};K.a.put("api/Articulos/Activar/"+this.adId,{},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e};K.a.put("api/Articulos/Desactivar/"+this.adId,{},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))}}}),vt=dt,ut=Object(V["a"])(vt,rt,nt,!1,null,null,null),mt=ut.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Roles")]),t._v(" "),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("v-spacer")],1),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.roles,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.nombre))]),t._v(" "),a("td",[t._v(t._s(e.item.descripcion))]),t._v(" "),a("td",[e.item.condicion?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])])]}}])},[a("template",{slot:"no-data"},[a("v-btn",{attrs:{outline:"",color:"primary"},on:{click:t.listar}},[t._v("Actualizar")])],1)],2)],1)],1)},ht=[],pt={data:function(){return{roles:[],dialog:!1,headers:[{text:"Nombre",value:"nombre"},{text:"Descripción",value:"descripcion",sortable:!1},{text:"Estado",value:"condicion",sortable:!1}],search:""}},computed:{},watch:{},created:function(){this.listar()},methods:{listar:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e};K.a.get("api/Roles/Listar",a).then((function(e){t.roles=e.data})).catch((function(t){console.log(t)}))}}},ft=pt,bt=Object(V["a"])(ft,_t,ht,!1,null,null,null),xt=bt.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Usuarios")]),t._v(" "),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-btn",{staticClass:"mb-2",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("Nuevo")]),t._v(" "),a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Nombre"},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-select",{attrs:{items:t.roles,label:"Rol"},model:{value:t.idrol,callback:function(e){t.idrol=e},expression:"idrol"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-select",{attrs:{items:t.documentos,label:"Documento"},model:{value:t.tipo_documento,callback:function(e){t.tipo_documento=e},expression:"tipo_documento"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Número"},model:{value:t.num_documento,callback:function(e){t.num_documento=e},expression:"num_documento"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Dirección"},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Teléfono"},model:{value:t.telefono,callback:function(e){t.telefono=e},expression:"telefono"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{type:"password",label:"Password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})))],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.close(e)}}},[t._v("Cancelar")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.guardar(e)}}},[t._v("Guardar")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("¿Activar Item?")]):t._e(),t._v(" "),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("¿Desactivar Item?")]):t._e(),t._v(" "),a("v-card-text",[t._v("\n                            Estás a punto de \n                            "),1==t.adAccion?a("span",[t._v("Activar ")]):t._e(),t._v(" "),2==t.adAccion?a("span",[t._v("Desactivar ")]):t._e(),t._v("\n                            el ítem "+t._s(t.adNombre)+"\n                        ")]),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:t.activarDesactivarCerrar}},[t._v("\n                                Cancelar\n                            ")]),t._v(" "),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:t.activar}},[t._v("\n                                Activar\n                            ")]):t._e(),t._v(" "),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:t.desactivar}},[t._v("\n                                Desactivar\n                            ")]):t._e()],1)],1)],1)],1),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.usuarios,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){t.editItem(e.item)}}},[t._v("\n                    edit\n                    ")]),t._v(" "),e.item.condicion?[a("v-icon",{attrs:{small:""},on:{click:function(a){t.activarDesactivarMostrar(2,e.item)}}},[t._v("\n                        block\n                        ")])]:[a("v-icon",{attrs:{small:""},on:{click:function(a){t.activarDesactivarMostrar(1,e.item)}}},[t._v("\n                        check\n                        ")])]],2),t._v(" "),a("td",[t._v(t._s(e.item.nombre))]),t._v(" "),a("td",[t._v(t._s(e.item.rol))]),t._v(" "),a("td",[t._v(t._s(e.item.tipo_documento))]),t._v(" "),a("td",[t._v(t._s(e.item.num_documento))]),t._v(" "),a("td",[t._v(t._s(e.item.direccion))]),t._v(" "),a("td",[t._v(t._s(e.item.telefono))]),t._v(" "),a("td",[t._v(t._s(e.item.email))]),t._v(" "),a("td",[e.item.condicion?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])])]}}])},[a("template",{slot:"no-data"},[a("v-btn",{attrs:{outline:"",color:"primary"},on:{click:t.listar}},[t._v("Actualizar")])],1)],2)],1)],1)},kt=[],Ct={data:function(){return{usuarios:[],dialog:!1,headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Nombre",value:"nombre"},{text:"Rol",value:"rol"},{text:"Documento",value:"tipo_documento"},{text:"Número",value:"num_documento",sortable:!1},{text:"Dirección",value:"direccion",sortable:!1},{text:"Teléfono",value:"telefono",sortable:!1},{text:"Email",value:"email",sortable:!1},{text:"Estado",value:"condicion",sortable:!1}],search:"",editedIndex:-1,id:"",idrol:"",roles:[],nombre:"",tipo_documento:"",documentos:["DNI","Pasaporte","Cedula"],num_documento:"",direccion:"",telefono:"",email:"",password:"",actPassword:!1,passwordAnt:"",valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo usuario":"Actualizar usuario"}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar(),this.select()},methods:{listar:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e};K.a.get("api/Usuarios/Listar",a).then((function(e){t.usuarios=e.data})).catch((function(t){console.log(t)}))},select:function(){var t=this,e=[],a={Authorization:"Bearer "+this.$store.state.token},o={headers:a};K.a.get("api/Roles/Select",o).then((function(a){e=a.data,e.map((function(e){t.roles.push({text:e.nombre,value:e.idrol})}))})).catch((function(t){console.log(t)}))},editItem:function(t){this.id=t.idusuario,this.idrol=t.idrol,this.nombre=t.nombre,this.tipo_documento=t.tipo_documento,this.num_documento=t.num_documento,this.direccion=t.direccion,this.telefono=t.telefono,this.email=t.email,this.password=t.password_hash,this.passwordAnt=t.password_hash,this.editedIndex=1,this.dialog=!0},close:function(){this.dialog=!1,this.limpiar()},limpiar:function(){this.id="",this.idrol="",this.nombre="",this.tipo_documento="",this.num_documento="",this.direccion="",this.telefono="",this.email="",this.password="",this.passwordAnt="",this.actPassword=!1,this.editedIndex=-1},guardar:function(){if(!this.validar()){var t={Authorization:"Bearer "+this.$store.state.token},e={headers:t};if(this.editedIndex>-1){var a=this;a.password!=a.passwordAnt&&(a.actPassword=!0),K.a.put("api/Usuarios/Actualizar",{idusuario:a.id,idrol:a.idrol,nombre:a.nombre,tipo_documento:a.tipo_documento,num_documento:a.num_documento,direccion:a.direccion,telefono:a.telefono,email:a.email,password:a.password,act_password:a.actPassword},e).then((function(t){a.close(),a.listar(),a.limpiar()})).catch((function(t){console.log(t)}))}else{var o=this;K.a.post("api/Usuarios/Crear",{idrol:o.idrol,nombre:o.nombre,tipo_documento:o.tipo_documento,num_documento:o.num_documento,direccion:o.direccion,telefono:o.telefono,email:o.email,password:o.password},e).then((function(t){o.close(),o.listar(),o.limpiar()})).catch((function(t){console.log(t)}))}}},validar:function(){return this.valida=0,this.validaMensaje=[],(this.nombre.length<3||this.nombre.length>100)&&this.validaMensaje.push("El nombre debe tener más de 3 caracteres y menos de 100 caracteres."),this.idrol||this.validaMensaje.push("Seleccione un rol."),this.tipo_documento||this.validaMensaje.push("Seleccione un tipo documento."),this.email||this.validaMensaje.push("Ingrese el email del usuario."),this.password||this.validaMensaje.push("Ingrese el password del usuario."),this.validaMensaje.length&&(this.valida=1),this.valida},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.nombre,this.adId=e.idusuario,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e};K.a.put("api/Usuarios/Activar/"+this.adId,{},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e};K.a.put("api/Usuarios/Desactivar/"+this.adId,{},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))}}},At=Ct,yt=Object(V["a"])(At,gt,kt,!1,null,null,null),jt=yt.exports,Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Clientes")]),t._v(" "),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-btn",{staticClass:"mb-2",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("Nuevo")]),t._v(" "),a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Nombre"},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-select",{attrs:{items:t.documentos,label:"Documento"},model:{value:t.tipo_documento,callback:function(e){t.tipo_documento=e},expression:"tipo_documento"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Número"},model:{value:t.num_documento,callback:function(e){t.num_documento=e},expression:"num_documento"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Dirección"},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Teléfono"},model:{value:t.telefono,callback:function(e){t.telefono=e},expression:"telefono"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t._v(" "),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})))],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.close(e)}}},[t._v("Cancelar")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.guardar(e)}}},[t._v("Guardar")])],1)],1)],1)],1),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.clientes,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){t.editItem(e.item)}}},[t._v("\n                    edit\n                    ")])],1),t._v(" "),a("td",[t._v(t._s(e.item.nombre))]),t._v(" "),a("td",[t._v(t._s(e.item.tipo_documento))]),t._v(" "),a("td",[t._v(t._s(e.item.num_documento))]),t._v(" "),a("td",[t._v(t._s(e.item.direccion))]),t._v(" "),a("td",[t._v(t._s(e.item.telefono))]),t._v(" "),a("td",[t._v(t._s(e.item.email.toLowerCase()))])]}}])},[a("template",{slot:"no-data"},[a("v-btn",{attrs:{outline:"",color:"primary"},on:{click:t.listar}},[t._v("Actualizar")])],1)],2)],1)],1)},It=[],wt={data:function(){return{clientes:[],dialog:!1,headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Nombre",value:"nombre"},{text:"Documento",value:"tipo_documento"},{text:"Número",value:"num_documento",sortable:!1},{text:"Dirección",value:"direccion",sortable:!1},{text:"Teléfono",value:"telefono",sortable:!1},{text:"Email",value:"email",sortable:!1}],search:"",editedIndex:-1,id:"",nombre:"",tipo_documento:"",documentos:["DNI","Pasaporte","Cedula"],num_documento:"",direccion:"",telefono:"",email:"",valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo cliente":"Actualizar cliente"}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar()},methods:{listar:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e};K.a.get("api/Personas/ListarClientes",a).then((function(e){t.clientes=e.data})).catch((function(t){console.log(t)}))},editItem:function(t){this.id=t.idpersona,this.nombre=t.nombre,this.tipo_documento=t.tipo_documento,this.num_documento=t.num_documento,this.direccion=t.direccion,this.telefono=t.telefono,this.email=t.email,this.editedIndex=1,this.dialog=!0},close:function(){this.dialog=!1,this.limpiar()},limpiar:function(){this.id="",this.nombre="",this.tipo_documento="",this.num_documento="",this.direccion="",this.telefono="",this.email="",this.editedIndex=-1},guardar:function(){if(!this.validar()){var t={Authorization:"Bearer "+this.$store.state.token},e={headers:t};if(this.editedIndex>-1){var a=this;K.a.put("api/Personas/Actualizar",{idpersona:a.id,tipo_persona:"Cliente",nombre:a.nombre,tipo_documento:a.tipo_documento,num_documento:a.num_documento,direccion:a.direccion,telefono:a.telefono,email:a.email},e).then((function(t){a.close(),a.listar(),a.limpiar()})).catch((function(t){console.log(t)}))}else{var o=this;K.a.post("api/Personas/Crear",{tipo_persona:"Cliente",nombre:o.nombre,tipo_documento:o.tipo_documento,num_documento:o.num_documento,direccion:o.direccion,telefono:o.telefono,email:o.email},e).then((function(t){o.close(),o.listar(),o.limpiar()})).catch((function(t){console.log(t)}))}}},validar:function(){return this.valida=0,this.validaMensaje=[],(this.nombre.length<3||this.nombre.length>100)&&this.validaMensaje.push("El nombre debe tener más de 3 caracteres y menos de 100 caracteres."),this.tipo_documento||this.validaMensaje.push("Seleccione un tipo documento."),this.validaMensaje.length&&(this.valida=1),this.valida}}},Dt=wt,Nt=Object(V["a"])(Dt,Mt,It,!1,null,null,null),St=Nt.exports,$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Proveedores")]),t._v(" "),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-btn",{staticClass:"mb-2",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("Nuevo")]),t._v(" "),a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Nombre"},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-select",{attrs:{items:t.documentos,label:"Documento"},model:{value:t.tipo_documento,callback:function(e){t.tipo_documento=e},expression:"tipo_documento"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Número"},model:{value:t.num_documento,callback:function(e){t.num_documento=e},expression:"num_documento"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Dirección"},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Teléfono"},model:{value:t.telefono,callback:function(e){t.telefono=e},expression:"telefono"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t._v(" "),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})))],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.close(e)}}},[t._v("Cancelar")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.guardar(e)}}},[t._v("Guardar")])],1)],1)],1)],1),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.proveedores,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){t.editItem(e.item)}}},[t._v("\n                    edit\n                    ")])],1),t._v(" "),a("td",[t._v(t._s(e.item.nombre))]),t._v(" "),a("td",[t._v(t._s(e.item.tipo_documento))]),t._v(" "),a("td",[t._v(t._s(e.item.num_documento))]),t._v(" "),a("td",[t._v(t._s(e.item.direccion))]),t._v(" "),a("td",[t._v(t._s(e.item.telefono))]),t._v(" "),a("td",[t._v(t._s(e.item.email.toLowerCase()))])]}}])},[a("template",{slot:"no-data"},[a("v-btn",{attrs:{outline:"",color:"primary"},on:{click:t.listar}},[t._v("Actualizar")])],1)],2)],1)],1)},Pt=[],zt={data:function(){return{proveedores:[],dialog:!1,headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Nombre",value:"nombre"},{text:"Documento",value:"tipo_documento"},{text:"Número",value:"num_documento",sortable:!1},{text:"Dirección",value:"direccion",sortable:!1},{text:"Teléfono",value:"telefono",sortable:!1},{text:"Email",value:"email",sortable:!1}],search:"",editedIndex:-1,id:"",nombre:"",tipo_documento:"",documentos:["DNI","Pasaporte","Cedula"],num_documento:"",direccion:"",telefono:"",email:"",valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo proveedor":"Actualizar proveedor"}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar()},methods:{listar:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e};K.a.get("api/Personas/ListarProveedores",a).then((function(e){t.proveedores=e.data})).catch((function(t){console.log(t)}))},editItem:function(t){this.id=t.idpersona,this.nombre=t.nombre,this.tipo_documento=t.tipo_documento,this.num_documento=t.num_documento,this.direccion=t.direccion,this.telefono=t.telefono,this.email=t.email,this.editedIndex=1,this.dialog=!0},close:function(){this.dialog=!1,this.limpiar()},limpiar:function(){this.id="",this.nombre="",this.tipo_documento="",this.num_documento="",this.direccion="",this.telefono="",this.email="",this.password="",this.editedIndex=-1},guardar:function(){if(!this.validar()){var t={Authorization:"Bearer "+this.$store.state.token},e={headers:t};if(this.editedIndex>-1){var a=this;K.a.put("api/Personas/Actualizar",{idpersona:a.id,tipo_persona:"Proveedor",nombre:a.nombre,tipo_documento:a.tipo_documento,num_documento:a.num_documento,direccion:a.direccion,telefono:a.telefono,email:a.email},e).then((function(t){a.close(),a.listar(),a.limpiar()})).catch((function(t){console.log(t)}))}else{var o=this;K.a.post("api/Personas/Crear",{tipo_persona:"Proveedor",nombre:o.nombre,tipo_documento:o.tipo_documento,num_documento:o.num_documento,direccion:o.direccion,telefono:o.telefono,email:o.email},e).then((function(t){o.close(),o.listar(),o.limpiar()})).catch((function(t){console.log(t)}))}}},validar:function(){return this.valida=0,this.validaMensaje=[],(this.nombre.length<3||this.nombre.length>100)&&this.validaMensaje.push("El nombre debe tener más de 3 caracteres y menos de 100 caracteres."),this.tipo_documento||this.validaMensaje.push("Seleccione un tipo documento."),this.validaMensaje.length&&(this.valida=1),this.valida}}},Bt=zt,Tt=Object(V["a"])(Bt,$t,Pt,!1,null,null,null),Et=Tt.exports,Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md6:"",lg5:"",xl4:""}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"blue darken-3"}},[a("v-toolbar-title",[t._v("\n                    Acceso al Sistema\n                ")])],1),t._v(" "),a("v-card-text",[a("v-text-field",{attrs:{autofocus:"",color:"accent",label:"Email",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),a("v-text-field",{attrs:{type:"password",color:"accent",label:"Password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),t.error?a("v-flex",{staticClass:"red--text"},[t._v("\n                    "+t._s(t.error)+"\n                ")]):t._e()],1),t._v(" "),a("v-card-actions",{staticClass:"px-3 pb-3"},[a("v-flex",{attrs:{"text-xs-right":""}},[a("v-btn",{attrs:{color:"primary"},on:{click:t.ingresar}},[t._v("Ingresar")])],1)],1)],1)],1)],1)},Ot=[],Vt={data:function(){return{email:"",password:"",error:null}},methods:{ingresar:function(){var t=this;this.error=null,K.a.post("api/Usuarios/Login",{email:this.email,password:this.password}).then((function(t){return t.data})).then((function(e){t.$store.dispatch("guardarToken",e.token),t.$router.push({name:"home"})})).catch((function(e){400==e.response.status?t.error="No es un email válido":404==e.response.status?t.error="No existe el usuario o sus datos son incorrectos":t.error="Ocurrió un error"}))}}},Lt=Vt,Ut=Object(V["a"])(Lt,Ft,Ot,!1,null,null,null),Yt=Ut.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Ingresos")]),t._v(" "),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),t._v(" "),a("v-spacer"),t._v(" "),0==t.verNuevo?a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}):t._e(),t._v(" "),0==t.verNuevo?a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){t.listar()}}},[t._v("Buscar")]):t._e(),t._v(" "),a("v-spacer"),t._v(" "),0==t.verNuevo?a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:t.mostrarNuevo}},[t._v("Nuevo")]):t._e(),t._v(" "),a("v-dialog",{attrs:{"max-width":"1000px"},model:{value:t.verArticulos,callback:function(e){t.verArticulos=e},expression:"verArticulos"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Seleccione un artículo")])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Ingrese artículo a buscar"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.listarArticulo()}},model:{value:t.texto,callback:function(e){t.texto=e},expression:"texto"}}),t._v(" "),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraArticulos,items:t.articulos},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){t.agregarDetalle(e.item)}}},[t._v("\n                                                            add\n                                                            ")])],1),t._v(" "),a("td",[t._v(t._s(e.item.nombre))]),t._v(" "),a("td",[t._v(t._s(e.item.categoria))]),t._v(" "),a("td",[t._v(t._s(e.item.descripcion))]),t._v(" "),a("td",[t._v(t._s(e.item.stock))]),t._v(" "),a("td",[t._v(t._s(e.item.precio_venta))])]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos para mostrar.")])])],2)]],2)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken",flat:""},on:{click:function(e){t.ocultarArticulos()}}},[t._v("Cerrar")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("¿Activar Item?")]):t._e(),t._v(" "),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v("¿Anular Ingreso?")]):t._e(),t._v(" "),a("v-card-text",[t._v("\n                                Estás a punto de \n                                "),1==t.adAccion?a("span",[t._v("Activar ")]):t._e(),t._v(" "),2==t.adAccion?a("span",[t._v("Anular ")]):t._e(),t._v("\n                                el ítem "+t._s(t.adNombre)+"\n                            ")]),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:t.activarDesactivarCerrar}},[t._v("\n                                    Cerrar\n                                ")]),t._v(" "),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:t.activar}},[t._v("\n                                    Activar\n                                ")]):t._e(),t._v(" "),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:t.desactivar}},[t._v("\n                                    Anular\n                                ")]):t._e()],1)],1)],1)],1),t._v(" "),0==t.verNuevo?a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.ingresos,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){t.verDetalles(e.item)}}},[t._v("\n                        tab\n                        ")]),t._v(" "),"Aceptado"==e.item.estado?[a("v-icon",{attrs:{small:""},on:{click:function(a){t.activarDesactivarMostrar(2,e.item)}}},[t._v("\n                            block\n                            ")])]:t._e()],2),t._v(" "),a("td",[t._v(t._s(e.item.usuario))]),t._v(" "),a("td",[t._v(t._s(e.item.proveedor))]),t._v(" "),a("td",[t._v(t._s(e.item.tipo_comprobante))]),t._v(" "),a("td",[t._v(t._s(e.item.serie_comprobante))]),t._v(" "),a("td",[t._v(t._s(e.item.num_comprobante))]),t._v(" "),a("td",[t._v(t._s(t.moment(e.item.fecha_hora).format("DD/MM/YYYY")))]),t._v(" "),a("td",[t._v(t._s(e.item.impuesto))]),t._v(" "),a("td",[t._v(t._s(e.item.total))]),t._v(" "),a("td",["Aceptado"==e.item.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Aceptado")])]):a("div",[a("span",{staticClass:"red--text"},[t._v(t._s(e.item.estado))])])])]}}])},[a("template",{slot:"no-data"},[a("v-btn",{attrs:{color:"primary"},on:{click:t.listar}},[t._v("Actualizar")])],1)],2):t._e(),t._v(" "),t.verNuevo?a("v-container",{staticClass:"pa-4 white",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-select",{attrs:{items:t.comprobantes,label:"Comprobante"},model:{value:t.tipo_comprobante,callback:function(e){t.tipo_comprobante=e},expression:"tipo_comprobante"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Serie"},model:{value:t.serie_comprobante,callback:function(e){t.serie_comprobante=e},expression:"serie_comprobante"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Número"},model:{value:t.num_comprobante,callback:function(e){t.num_comprobante=e},expression:"num_comprobante"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm8:"",md8:"",lg8:"",xl8:""}},[a("v-select",{attrs:{items:t.proveedores,label:"Proveedor"},model:{value:t.idproveedor,callback:function(e){t.idproveedor=e},expression:"idproveedor"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{type:"number",label:"Impuesto"},model:{value:t.impuesto,callback:function(e){t.impuesto=e},expression:"impuesto"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm8:"",md8:"",lg8:"",xl8:""}},[a("v-text-field",{attrs:{label:"Código"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.buscarCodigo()}},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-btn",{attrs:{small:"",fab:"",dark:"",color:"teal"},on:{click:function(e){t.mostrarArticulos()}}},[a("v-icon",{attrs:{dark:""}},[t._v("list")])],1)],1),t._v(" "),t.errorArticulo?a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("div",{staticClass:"red--text",domProps:{textContent:t._s(t.errorArticulo)}})]):t._e(),t._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){t.eliminarDetalle(t.detalles,e.item)}}},[t._v("\n                                    delete\n                                    ")])],1),t._v(" "),a("td",[t._v(t._s(e.item.articulo))]),t._v(" "),a("td",[a("v-text-field",{attrs:{type:"number"},model:{value:e.item.cantidad,callback:function(a){t.$set(e.item,"cantidad",a)},expression:"props.item.cantidad"}})],1),t._v(" "),a("td",[a("v-text-field",{attrs:{type:"number"},model:{value:e.item.precio,callback:function(a){t.$set(e.item,"precio",a)},expression:"props.item.precio"}})],1),t._v(" "),a("td",[t._v("$ "+t._s(e.item.cantidad*e.item.precio))])]}}])},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2),t._v(" "),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total Parcial: ")]),t._v("$ "+t._s(t.totalParcial=(t.total-t.totalImpuesto).toFixed(2))+"\n                        ")]),t._v(" "),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total Impuesto: ")]),t._v("$ "+t._s(t.totalImpuesto=(t.total*t.impuesto/100).toFixed(2))+"\n                        ")]),t._v(" "),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total Neto: ")]),t._v("$ "+t._s(t.total=t.calcularTotal.toFixed(2))+"\n                        ")])],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})}))),t._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(e){t.ocultarNuevo()}}},[t._v("Cerrar")]),t._v(" "),0==t.verDet?a("v-btn",{attrs:{color:"success"},on:{click:function(e){t.guardar()}}},[t._v("Guardar")]):t._e()],1)],1)],1):t._e()],1)],1)},Gt=[],Rt={data:function(){return{ingresos:[],dialog:!1,headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Usuario",value:"usuario"},{text:"Proveedor",value:"proveedor"},{text:"Comprobante",value:"tipo_comprobante"},{text:"Serie",value:"serie_comprobante",sortable:!1},{text:"Número",value:"num_comprobante",sortable:!1},{text:"Fecha",value:"fecha_hora",sortable:!1},{text:"Impuesto",value:"impuesto",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"Estado",value:"estado",sortable:!1}],cabeceraDetalles:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Artículo",value:"articulo",sortable:!1},{text:"Cantidad",value:"cantidad",sortable:!1},{text:"Precio",value:"precio",sortable:!1},{text:"Subtotal",value:"subtotal",sortable:!1}],detalles:[],search:"",id:"",idproveedor:"",proveedores:[],tipo_comprobante:"",comprobantes:["Factura","Boleta","Ticket"],serie_comprobante:"",num_comprobante:"",impuesto:21,codigo:"",verNuevo:0,errorArticulo:null,totalParcial:0,totalImpuesto:0,total:0,cabeceraArticulos:[{text:"Seleccionar",value:"seleccionar",sortable:!1},{text:"Artículo",value:"articulo"},{text:"Categoría",value:"categoria"},{text:"Descripción",value:"descripcion",sortable:!1},{text:"Stock",value:"stock",sortable:!1},{text:"Precio Venta",value:"precio_venta",sortable:!1}],articulos:[],texto:"",verArticulos:0,verDet:0,valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:""}},computed:{calcularTotal:function(){for(var t=0,e=0;e<this.detalles.length;e++)t+=this.detalles[e].precio*this.detalles[e].cantidad;return t}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar(),this.select()},methods:{mostrarNuevo:function(){this.verNuevo=1},ocultarNuevo:function(){this.verNuevo=0,this.limpiar()},buscarCodigo:function(){var t=this;t.errorArticulo=null;var e={Authorization:"Bearer "+this.$store.state.token},a={headers:e};K.a.get("api/Articulos/BuscarCodigoIngreso/"+this.codigo,a).then((function(e){t.agregarDetalle(e.data)})).catch((function(e){console.log(e),t.errorArticulo="No existe el artículo"}))},listarArticulo:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e};K.a.get("api/Articulos/ListarIngreso/"+t.texto,a).then((function(e){t.articulos=e.data})).catch((function(t){console.log(t)}))},mostrarArticulos:function(){this.verArticulos=1},ocultarArticulos:function(){this.verArticulos=0},agregarDetalle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.errorArticulo=null,this.encuentra(t["idarticulo"])?this.errorArticulo="El artículo ya ha sido agregado.":this.detalles.push({idarticulo:t["idarticulo"],articulo:t["nombre"],cantidad:1,precio:t["precio_venta"]})},encuentra:function(t){for(var e=0,a=0;a<this.detalles.length;a++)this.detalles[a].idarticulo==t&&(e=1);return e},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!==a&&t.splice(a,1)},listar:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e},o="";o=t.search?"api/Ingresos/ListarFiltro/"+t.search:"api/Ingresos/Listar",K.a.get(o,a).then((function(e){t.ingresos=e.data})).catch((function(t){console.log(t)}))},listarDetalles:function(t){var e=this,a={Authorization:"Bearer "+this.$store.state.token},o={headers:a};K.a.get("api/Ingresos/ListarDetalles/"+t,o).then((function(t){e.detalles=t.data})).catch((function(t){console.log(t)}))},verDetalles:function(t){this.limpiar(),this.tipo_comprobante=t.tipo_comprobante,this.serie_comprobante=t.serie_comprobante,this.num_comprobante=t.num_comprobante,this.idproveedor=t.idproveedor,this.impuesto=t.impuesto,this.listarDetalles(t.idingreso),this.verNuevo=1,this.verDet=1},select:function(){var t=this,e=[],a={Authorization:"Bearer "+this.$store.state.token},o={headers:a};K.a.get("api/Personas/SelectProveedores",o).then((function(a){e=a.data,e.map((function(e){t.proveedores.push({text:e.nombre,value:e.idpersona})}))})).catch((function(t){console.log(t)}))},limpiar:function(){this.id="",this.idproveedor="",this.tipo_comprobante="",this.serie_comprobante="",this.num_comprobante="",this.impuesto="21",this.codigo="",this.detalles=[],this.total=0,this.totalImpuesto=0,this.totalParcial=0,this.verDet=0},guardar:function(){if(!this.validar()){var t={Authorization:"Bearer "+this.$store.state.token},e={headers:t},a=this;K.a.post("api/Ingresos/Crear",{idproveedor:a.idproveedor,idusuario:a.$store.state.usuario.idusuario,tipo_comprobante:a.tipo_comprobante,serie_comprobante:a.serie_comprobante,num_comprobante:a.num_comprobante,impuesto:a.impuesto,total:a.total,detalles:a.detalles},e).then((function(t){a.ocultarNuevo(),a.listar(),a.limpiar()})).catch((function(t){console.log(t)}))}},validar:function(){return this.valida=0,this.validaMensaje=[],this.idproveedor||this.validaMensaje.push("Seleccione un proveedor."),this.tipo_comprobante||this.validaMensaje.push("Seleccione un tipo de comprobante."),this.num_comprobante||this.validaMensaje.push("Ingrese el número del comprobante."),(!this.impuesto||this.impuesto<0)&&this.validaMensaje.push("Ingrese un impuesto válido."),this.detalles.length<=0&&this.validaMensaje.push("Ingrese al menos un artículo al detalle."),this.validaMensaje.length&&(this.valida=1),this.valida},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.num_comprobante,this.adId=e.idingreso,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},desactivar:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e};K.a.put("api/Ingresos/Anular/"+this.adId,{},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))}}},Kt=Rt,Jt=Object(V["a"])(Kt,qt,Gt,!1,null,null,null),Ht=Jt.exports,Wt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-layout",{attrs:{"align-start":""}},[o("v-flex",[o("v-toolbar",{attrs:{flat:"",color:"white"}},[o("v-toolbar-title",[t._v("Ventas")]),t._v(" "),o("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),t._v(" "),o("v-spacer"),t._v(" "),0==t.verNuevo?o("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}):t._e(),t._v(" "),0==t.verNuevo?o("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){t.listar()}}},[t._v("Buscar")]):t._e(),t._v(" "),o("v-spacer"),t._v(" "),0==t.verNuevo?o("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:t.mostrarNuevo}},[t._v("Nuevo")]):t._e(),t._v(" "),o("v-dialog",{attrs:{"max-width":"1000px"},model:{value:t.verArticulos,callback:function(e){t.verArticulos=e},expression:"verArticulos"}},[o("v-card",[o("v-card-title",[o("span",{staticClass:"headline"},[t._v("Seleccione un artículo")])]),t._v(" "),o("v-card-text",[o("v-container",{attrs:{"grid-list-md":""}},[o("v-layout",{attrs:{wrap:""}},[o("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[o("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Ingrese artículo a buscar"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.listarArticulo()}},model:{value:t.texto,callback:function(e){t.texto=e},expression:"texto"}}),t._v(" "),[o("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraArticulos,items:t.articulos},scopedSlots:t._u([{key:"items",fn:function(e){return[o("td",{staticClass:"justify-center layout px-0"},[o("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){t.agregarDetalle(e.item)}}},[t._v("add")])],1),t._v(" "),o("td",[t._v(t._s(e.item.nombre))]),t._v(" "),o("td",[t._v(t._s(e.item.categoria))]),t._v(" "),o("td",[t._v(t._s(e.item.descripcion))]),t._v(" "),o("td",[t._v(t._s(e.item.stock))]),t._v(" "),o("td",[t._v(t._s(e.item.precio_venta))])]}}])},[o("template",{slot:"no-data"},[o("h3",[t._v("No hay artículos para mostrar.")])])],2)]],2)],1)],1)],1),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"blue darken",flat:""},on:{click:function(e){t.ocultarArticulos()}}},[t._v("Cerrar")])],1)],1)],1),t._v(" "),o("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[o("v-card",[1==t.adAccion?o("v-card-title",{staticClass:"headline"},[t._v("¿Activar Item?")]):t._e(),t._v(" "),2==t.adAccion?o("v-card-title",{staticClass:"headline"},[t._v("¿Anular Venta?")]):t._e(),t._v(" "),o("v-card-text",[t._v("\n            Estás a punto de\n            "),1==t.adAccion?o("span",[t._v("Activar")]):t._e(),t._v(" "),2==t.adAccion?o("span",[t._v("Anular")]):t._e(),t._v("\n            el ítem "+t._s(t.adNombre)+"\n          ")]),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:t.activarDesactivarCerrar}},[t._v("Cerrar")]),t._v(" "),1==t.adAccion?o("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:t.activar}},[t._v("Activar")]):t._e(),t._v(" "),2==t.adAccion?o("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:t.desactivar}},[t._v("Anular")]):t._e()],1)],1)],1),t._v(" "),o("v-dialog",{attrs:{"max-width":"1000px"},model:{value:t.comprobanteModal,callback:function(e){t.comprobanteModal=e},expression:"comprobanteModal"}},[o("v-card",[o("v-card-text",[o("v-btn",[o("v-icon",{on:{click:function(e){t.crearPDF()}}},[t._v("print")])],1),t._v(" "),o("div",{attrs:{id:"factura"}},[o("header",[o("div",{attrs:{id:"logo"}},[o("img",{attrs:{src:a("cf05"),id:"imagen"}})]),t._v(" "),o("div",{attrs:{id:"fact"}},[o("p",[t._v("\n                    "+t._s(t.tipo_comprobante)+"\n                    "),o("br"),t._v("\n                    "+t._s(t.serie_comprobante)+"-"+t._s(t.num_comprobante)+"\n                    "),o("br"),t._v("\n                    "+t._s(t.moment(t.fecha_hora).format("DD/MM/YYYY"))+"\n                  ")])])]),t._v(" "),o("br"),t._v(" "),o("section",[o("div",[o("table",{attrs:{id:"facliente"}},[o("tbody",[o("tr",[o("td",{attrs:{id:"cliente"}},[o("strong",[t._v("Sr(a). "+t._s(t.cliente))]),t._v(" "),o("br"),t._v(" "),o("strong",[t._v("Documento:")]),t._v("\n                          "+t._s(t.num_documento)+"\n                          "),o("br"),t._v(" "),o("strong",[t._v("Dirección:")]),t._v("\n                          "+t._s(t.direccion)+"\n                          "),o("br"),t._v(" "),o("strong",[t._v("Teléfono:")]),t._v("\n                          "+t._s(t.telefono)+"\n                          "),o("br"),t._v(" "),o("strong",[t._v("Email:")]),t._v("\n                          "+t._s(t.email)+"\n                        ")])])])])])]),t._v(" "),o("br"),t._v(" "),o("section",[o("div",[o("table",{attrs:{id:"facarticulo"}},[o("thead",[o("tr",{attrs:{id:"fa"}},[o("th",[t._v("Cantidad")]),t._v(" "),o("th",[t._v("Descripción")]),t._v(" "),o("th",[t._v("Precio")]),t._v(" "),o("th",[t._v("Descuento")]),t._v(" "),o("th",[t._v("Total")])])]),t._v(" "),o("tbody",t._l(t.detalles,(function(e){return o("tr",{key:e.iddetalle_venta},[o("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.cantidad))]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.articulo))]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.precio.toFixed(2)))]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.descuento.toFixed(2)))]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v(t._s((e.cantidad*e.precio-e.descuento).toFixed(2)))])])}))),t._v(" "),o("tfoot",[o("tr",[o("th"),t._v(" "),o("th"),t._v(" "),o("th"),t._v(" "),o("th",{staticStyle:{"text-align":"right"}},[t._v("Subtotal")]),t._v(" "),o("th",{staticStyle:{"text-align":"right"}},[t._v("$"+t._s(t.totalParcial=(t.total-t.totalImpuesto).toFixed(2)))])]),t._v(" "),o("tr",[o("th"),t._v(" "),o("th"),t._v(" "),o("th"),t._v(" "),o("th",{staticStyle:{"text-align":"right"}},[t._v("IVA ("+t._s(t.impuesto)+"%)")]),t._v(" "),o("th",{staticStyle:{"text-align":"right"}},[t._v("$"+t._s(t.totalImpuesto=(t.total*t.impuesto/100).toFixed(2)))])]),t._v(" "),o("tr",[o("th"),t._v(" "),o("th"),t._v(" "),o("th"),t._v(" "),o("th",{staticStyle:{"text-align":"right"}},[t._v("Total")]),t._v(" "),o("th",{staticStyle:{"text-align":"right"}},[t._v("$ "+t._s(t.total=t.calcularTotal.toFixed(2)))])])])])])]),t._v(" "),o("br")]),t._v(" "),o("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(e){t.ocultarComprobante()}}},[t._v("Cerrar")])],1)],1)],1)],1),t._v(" "),0==t.verNuevo?o("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.ventas,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[o("td",{staticClass:"justify-center layout px-0"},[o("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){t.verDetalles(e.item)}}},[t._v("tab")]),t._v(" "),o("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){t.mostrarComprobante(e.item)}}},[t._v("print")]),t._v(" "),"Aceptado"==e.item.estado?[o("v-icon",{attrs:{small:""},on:{click:function(a){t.activarDesactivarMostrar(2,e.item)}}},[t._v("block")])]:t._e()],2),t._v(" "),o("td",[t._v(t._s(e.item.usuario))]),t._v(" "),o("td",[t._v(t._s(e.item.cliente))]),t._v(" "),o("td",[t._v(t._s(e.item.tipo_comprobante))]),t._v(" "),o("td",[t._v(t._s(e.item.serie_comprobante))]),t._v(" "),o("td",[t._v(t._s(e.item.num_comprobante))]),t._v(" "),o("td",[t._v(t._s(t.moment(e.item.fecha_hora).format("DD/MM/YYYY")))]),t._v(" "),o("td",[t._v(t._s(e.item.impuesto))]),t._v(" "),o("td",[t._v(t._s(e.item.total))]),t._v(" "),o("td",["Aceptado"==e.item.estado?o("div",[o("span",{staticClass:"blue--text"},[t._v("Aceptado")])]):o("div",[o("span",{staticClass:"red--text"},[t._v(t._s(e.item.estado))])])])]}}])},[o("template",{slot:"no-data"},[o("v-btn",{attrs:{outline:"",color:"primary"},on:{click:t.listar}},[t._v("Actualizar")])],1)],2):t._e(),t._v(" "),t.verNuevo?o("v-container",{staticClass:"pa-4 white",attrs:{"grid-list-sm":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[o("v-select",{attrs:{items:t.comprobantes,label:"Comprobante"},model:{value:t.tipo_comprobante,callback:function(e){t.tipo_comprobante=e},expression:"tipo_comprobante"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[o("v-text-field",{attrs:{label:"Serie"},model:{value:t.serie_comprobante,callback:function(e){t.serie_comprobante=e},expression:"serie_comprobante"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[o("v-text-field",{attrs:{label:"Número"},model:{value:t.num_comprobante,callback:function(e){t.num_comprobante=e},expression:"num_comprobante"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm8:"",md8:"",lg8:"",xl8:""}},[o("v-select",{attrs:{items:t.clientes,label:"Cliente"},model:{value:t.idcliente,callback:function(e){t.idcliente=e},expression:"idcliente"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[o("v-text-field",{attrs:{type:"number",label:"Impuesto"},model:{value:t.impuesto,callback:function(e){t.impuesto=e},expression:"impuesto"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm8:"",md8:"",lg8:"",xl8:""}},[o("v-text-field",{attrs:{label:"Código"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.buscarCodigo()}},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[o("v-btn",{attrs:{small:"",fab:"",dark:"",color:"teal"},on:{click:function(e){t.mostrarArticulos()}}},[o("v-icon",{attrs:{dark:""}},[t._v("list")])],1)],1),t._v(" "),t.errorArticulo?o("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[o("div",{staticClass:"red--text",domProps:{textContent:t._s(t.errorArticulo)}})]):t._e(),t._v(" "),o("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[o("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[o("td",{staticClass:"justify-center layout px-0"},[o("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){t.eliminarDetalle(t.detalles,e.item)}}},[t._v("delete")])],1),t._v(" "),o("td",[t._v(t._s(e.item.articulo))]),t._v(" "),o("td",[o("v-text-field",{attrs:{type:"number"},model:{value:e.item.cantidad,callback:function(a){t.$set(e.item,"cantidad",a)},expression:"props.item.cantidad"}})],1),t._v(" "),o("td",[o("v-text-field",{attrs:{type:"number"},model:{value:e.item.precio,callback:function(a){t.$set(e.item,"precio",a)},expression:"props.item.precio"}})],1),t._v(" "),o("td",[o("v-text-field",{attrs:{type:"number"},model:{value:e.item.descuento,callback:function(a){t.$set(e.item,"descuento",a)},expression:"props.item.descuento"}})],1),t._v(" "),o("td",[t._v("$ "+t._s(e.item.cantidad*e.item.precio-e.item.descuento))])]}}])},[o("template",{slot:"no-data"},[o("h3",[t._v("No hay artículos agregados al detalle.")])])],2),t._v(" "),o("v-flex",{staticClass:"text-xs-right"},[o("strong",[t._v("Total Parcial:")]),t._v("\n            $ "+t._s(t.totalParcial=(t.total-t.totalImpuesto).toFixed(2))+"\n          ")]),t._v(" "),o("v-flex",{staticClass:"text-xs-right"},[o("strong",[t._v("Total Impuesto:")]),t._v("\n            $ "+t._s(t.totalImpuesto=(t.total*t.impuesto/100).toFixed(2))+"\n          ")]),t._v(" "),o("v-flex",{staticClass:"text-xs-right"},[o("strong",[t._v("Total Neto:")]),t._v("\n            $ "+t._s(t.total=t.calcularTotal.toFixed(2))+"\n          ")])],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},t._l(t.validaMensaje,(function(e){return o("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})}))),t._v(" "),o("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[o("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(e){t.ocultarNuevo()}}},[t._v("Cerrar")]),t._v(" "),0==t.verDet?o("v-btn",{attrs:{color:"success"},on:{click:function(e){t.guardar()}}},[t._v("Guardar")]):t._e()],1)],1)],1):t._e()],1)],1)},Zt=[],Qt=a("c0e9"),Xt=a.n(Qt),te={data:function(){return{ventas:[],dialog:!1,headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Usuario",value:"usuario"},{text:"Cliente",value:"cliente"},{text:"Comprobante",value:"tipo_comprobante"},{text:"Serie",value:"serie_comprobante",sortable:!1},{text:"Número",value:"num_comprobante",sortable:!1},{text:"Fecha",value:"fecha_hora",sortable:!1},{text:"Impuesto",value:"impuesto",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"Estado",value:"estado",sortable:!1}],cabeceraDetalles:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Artículo",value:"articulo",sortable:!1},{text:"Cantidad",value:"cantidad",sortable:!1},{text:"Precio",value:"precio",sortable:!1},{text:"Descuento",value:"descuento",sortable:!1},{text:"Subtotal",value:"subtotal",sortable:!1}],detalles:[],search:"",id:"",idcliente:"",clientes:[],tipo_comprobante:"",comprobantes:["Factura","Boleta","Ticket"],serie_comprobante:"",num_comprobante:"",impuesto:21,codigo:"",verNuevo:0,errorArticulo:null,totalParcial:0,totalImpuesto:0,total:0,cabeceraArticulos:[{text:"Seleccionar",value:"seleccionar",sortable:!1},{text:"Artículo",value:"articulo"},{text:"Categoría",value:"categoria"},{text:"Descripción",value:"descripcion",sortable:!1},{text:"Stock",value:"stock",sortable:!1},{text:"Precio Venta",value:"precio_venta",sortable:!1}],articulos:[],texto:"",verArticulos:0,verDet:0,valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:"",comprobanteModal:0,cliente:"",fecha_hora:"",num_documento:"",direccion:"",telefono:"",email:""}},computed:{calcularTotal:function(){for(var t=0,e=0;e<this.detalles.length;e++)t+=this.detalles[e].precio*this.detalles[e].cantidad-this.detalles[e].descuento;return t}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar(),this.select()},methods:{crearPDF:function(){var t=document.getElementById("factura");Xt()(t).then((function(t){var e=t.toDataURL("image/png"),a=210,o=t.height*a/t.width,i=new ct.a,s=0;i.addImage(e,"PNG",0,s,a,o),i.save("Comprobante_venta.pdf")}))},mostrarComprobante:function(t){this.limpiar(),this.tipo_comprobante=t.tipo_comprobante,this.serie_comprobante=t.serie_comprobante,this.num_comprobante=t.num_comprobante,this.cliente=t.cliente,this.num_documento=t.num_documento,this.direccion=t.direccion,this.telefono=t.telefono,this.email=t.email,this.fecha_hora=t.fecha_hora,this.impuesto=t.impuesto,this.listarDetalles(t.idventa),this.comprobanteModal=1},ocultarComprobante:function(){this.comprobanteModal=0,this.limpiar()},mostrarNuevo:function(){this.verNuevo=1},ocultarNuevo:function(){this.verNuevo=0,this.limpiar()},buscarCodigo:function(){var t=this;t.errorArticulo=null;var e={Authorization:"Bearer "+this.$store.state.token},a={headers:e};K.a.get("api/Articulos/BuscarCodigoVenta/"+this.codigo,a).then((function(e){t.agregarDetalle(e.data)})).catch((function(e){console.log(e),t.errorArticulo="No existe el artículo"}))},listarArticulo:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e};K.a.get("api/Articulos/ListarVenta/"+t.texto,a).then((function(e){t.articulos=e.data})).catch((function(t){console.log(t)}))},mostrarArticulos:function(){this.verArticulos=1},ocultarArticulos:function(){this.verArticulos=0},agregarDetalle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.errorArticulo=null,this.encuentra(t["idarticulo"])?this.errorArticulo="El artículo ya ha sido agregado.":this.detalles.push({idarticulo:t["idarticulo"],articulo:t["nombre"],cantidad:1,precio:t["precio_venta"],descuento:0})},encuentra:function(t){for(var e=0,a=0;a<this.detalles.length;a++)this.detalles[a].idarticulo==t&&(e=1);return e},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!==a&&t.splice(a,1)},listar:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e},o="";o=t.search?"api/Ventas/ListarFiltro/"+t.search:"api/Ventas/Listar",K.a.get(o,a).then((function(e){t.ventas=e.data})).catch((function(t){console.log(t)}))},listarDetalles:function(t){var e=this,a={Authorization:"Bearer "+this.$store.state.token},o={headers:a};K.a.get("api/Ventas/ListarDetalles/"+t,o).then((function(t){e.detalles=t.data})).catch((function(t){console.log(t)}))},verDetalles:function(t){this.limpiar(),this.tipo_comprobante=t.tipo_comprobante,this.serie_comprobante=t.serie_comprobante,this.num_comprobante=t.num_comprobante,this.idcliente=t.idcliente,this.impuesto=t.impuesto,this.listarDetalles(t.idventa),this.verNuevo=1,this.verDet=1},select:function(){var t=this,e=[],a={Authorization:"Bearer "+this.$store.state.token},o={headers:a};K.a.get("api/Personas/SelectClientes",o).then((function(a){e=a.data,e.map((function(e){t.clientes.push({text:e.nombre,value:e.idpersona})}))})).catch((function(t){console.log(t)}))},limpiar:function(){this.id="",this.idcliente="",this.tipo_comprobante="",this.serie_comprobante="",this.num_comprobante="",this.impuesto="21",this.codigo="",this.detalles=[],this.total=0,this.totalImpuesto=0,this.totalParcial=0,this.verDet=0},guardar:function(){if(!this.validar()){var t={Authorization:"Bearer "+this.$store.state.token},e={headers:t},a=this;K.a.post("api/Ventas/Crear",{idcliente:a.idcliente,idusuario:a.$store.state.usuario.idusuario,tipo_comprobante:a.tipo_comprobante,serie_comprobante:a.serie_comprobante,num_comprobante:a.num_comprobante,impuesto:a.impuesto,total:a.total,detalles:a.detalles},e).then((function(t){a.ocultarNuevo(),a.listar(),a.limpiar()})).catch((function(t){console.log(t)}))}},validar:function(){return this.valida=0,this.validaMensaje=[],this.idcliente||this.validaMensaje.push("Seleccione un cliente."),this.tipo_comprobante||this.validaMensaje.push("Seleccione un tipo de comprobante."),this.num_comprobante||this.validaMensaje.push("Ingrese el número del comprobante."),(!this.impuesto||this.impuesto<0)&&this.validaMensaje.push("Ingrese un impuesto válido."),this.detalles.length<=0&&this.validaMensaje.push("Ingrese al menos un artículo al detalle."),this.validaMensaje.length&&(this.valida=1),this.valida},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.num_comprobante,this.adId=e.idventa,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},desactivar:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e};K.a.put("api/Ventas/Anular/"+this.adId,{},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))}}},ee=te,ae=(a("02d6"),Object(V["a"])(ee,Wt,Zt,!1,null,null,null)),oe=ae.exports,ie=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-layout",{attrs:{"align-start":""}},[o("v-flex",[o("v-toolbar",{attrs:{flat:"",color:"white"}},[o("v-toolbar-title",[t._v("Historial de ventas")]),t._v(" "),o("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),t._v(" "),o("v-spacer"),t._v(" "),0==t.verNuevo?o("v-text-field",{staticClass:"text-xs-center",attrs:{type:"date"},model:{value:t.fechaInicio,callback:function(e){t.fechaInicio=e},expression:"fechaInicio"}}):t._e(),t._v(" "),0==t.verNuevo?o("v-text-field",{staticClass:"text-xs-center",attrs:{type:"date"},model:{value:t.fechaFin,callback:function(e){t.fechaFin=e},expression:"fechaFin"}}):t._e(),t._v(" "),0==t.verNuevo?o("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){t.listar()}}},[t._v("Buscar")]):t._e(),t._v(" "),o("v-dialog",{attrs:{"max-width":"1000px"},model:{value:t.comprobanteModal,callback:function(e){t.comprobanteModal=e},expression:"comprobanteModal"}},[o("v-card",[o("v-card-text",[o("v-btn",[o("v-icon",{on:{click:function(e){t.crearPDF()}}},[t._v("print")])],1),t._v(" "),o("div",{attrs:{id:"factura"}},[o("header",[o("div",{attrs:{id:"logo"}},[o("img",{attrs:{src:a("cf05"),id:"imagen"}})]),t._v(" "),o("div",{attrs:{id:"fact"}},[o("p",[t._v("\n                    "+t._s(t.tipo_comprobante)+"\n                    "),o("br"),t._v("\n                    "+t._s(t.serie_comprobante)+"-"+t._s(t.num_comprobante)+"\n                    "),o("br"),t._v("\n                    "+t._s(t.moment(t.fecha_hora).format("DD/MM/YYYY"))+"\n                  ")])])]),t._v(" "),o("br"),t._v(" "),o("section",[o("div",[o("table",{attrs:{id:"facliente"}},[o("tbody",[o("tr",[o("td",{attrs:{id:"cliente"}},[o("strong",[t._v("Sr(a). "+t._s(t.cliente))]),t._v(" "),o("br"),t._v(" "),o("strong",[t._v("Documento:")]),t._v("\n                          "+t._s(t.num_documento)+"\n                          "),o("br"),t._v(" "),o("strong",[t._v("Dirección:")]),t._v("\n                          "+t._s(t.direccion)+"\n                          "),o("br"),t._v(" "),o("strong",[t._v("Teléfono:")]),t._v("\n                          "+t._s(t.telefono)+"\n                          "),o("br"),t._v(" "),o("strong",[t._v("Email:")]),t._v("\n                          "+t._s(t.email)+"\n                        ")])])])])])]),t._v(" "),o("br"),t._v(" "),o("section",[o("div",[o("table",{attrs:{id:"facarticulo"}},[o("thead",[o("tr",{attrs:{id:"fa"}},[o("th",[t._v("Cantidad")]),t._v(" "),o("th",[t._v("Descripción")]),t._v(" "),o("th",[t._v("Precio")]),t._v(" "),o("th",[t._v("Descuento")]),t._v(" "),o("th",[t._v("Total")])])]),t._v(" "),o("tbody",t._l(t.detalles,(function(e){return o("tr",{key:e.iddetalle_venta},[o("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.cantidad))]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.articulo))]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.precio.toFixed(2)))]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.descuento.toFixed(2)))]),t._v(" "),o("td",{staticStyle:{"text-align":"center"}},[t._v(t._s((e.cantidad*e.precio-e.descuento).toFixed(2)))])])}))),t._v(" "),o("tfoot",[o("tr",[o("th"),t._v(" "),o("th"),t._v(" "),o("th"),t._v(" "),o("th",{staticStyle:{"text-align":"right"}},[t._v("Subtotal")]),t._v(" "),o("th",{staticStyle:{"text-align":"right"}},[t._v("$"+t._s(t.totalParcial=(t.total-t.totalImpuesto).toFixed(2)))])]),t._v(" "),o("tr",[o("th"),t._v(" "),o("th"),t._v(" "),o("th"),t._v(" "),o("th",{staticStyle:{"text-align":"right"}},[t._v("IVA ("+t._s(t.impuesto)+"%)")]),t._v(" "),o("th",{staticStyle:{"text-align":"right"}},[t._v("$"+t._s(t.totalImpuesto=(t.total*t.impuesto/100).toFixed(2)))])]),t._v(" "),o("tr",[o("th"),t._v(" "),o("th"),t._v(" "),o("th"),t._v(" "),o("th",{staticStyle:{"text-align":"right"}},[t._v("Total")]),t._v(" "),o("th",{staticStyle:{"text-align":"right"}},[t._v("$ "+t._s(t.total=t.calcularTotal.toFixed(2)))])])])])])]),t._v(" "),o("br")]),t._v(" "),o("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(e){t.ocultarComprobante()}}},[t._v("Cerrar")])],1)],1)],1)],1),t._v(" "),0==t.verNuevo?o("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.ventas},scopedSlots:t._u([{key:"items",fn:function(e){return[o("td",{staticClass:"justify-center layout px-0"},[o("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){t.verDetalles(e.item)}}},[t._v("tab")]),t._v(" "),o("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){t.mostrarComprobante(e.item)}}},[t._v("print")])],1),t._v(" "),o("td",[t._v(t._s(e.item.usuario))]),t._v(" "),o("td",[t._v(t._s(e.item.cliente))]),t._v(" "),o("td",[t._v(t._s(e.item.tipo_comprobante))]),t._v(" "),o("td",[t._v(t._s(e.item.serie_comprobante))]),t._v(" "),o("td",[t._v(t._s(e.item.num_comprobante))]),t._v(" "),o("td",[t._v(t._s(t.moment(e.item.fecha_hora).format("DD/MM/YYYY")))]),t._v(" "),o("td",[t._v(t._s(e.item.impuesto))]),t._v(" "),o("td",[t._v(t._s(e.item.total))]),t._v(" "),o("td",["Aceptado"==e.item.estado?o("div",[o("span",{staticClass:"blue--text"},[t._v("Aceptado")])]):o("div",[o("span",{staticClass:"red--text"},[t._v(t._s(e.item.estado))])])])]}}])},[o("template",{slot:"no-data"},[o("v-btn",{attrs:{outline:"",color:"primary"},on:{click:t.listar}},[t._v("Actualizar")])],1)],2):t._e(),t._v(" "),t.verNuevo?o("v-container",{staticClass:"pa-4 white",attrs:{"grid-list-sm":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[o("v-select",{attrs:{items:t.comprobantes,label:"Comprobante"},model:{value:t.tipo_comprobante,callback:function(e){t.tipo_comprobante=e},expression:"tipo_comprobante"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[o("v-text-field",{attrs:{label:"Serie"},model:{value:t.serie_comprobante,callback:function(e){t.serie_comprobante=e},expression:"serie_comprobante"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[o("v-text-field",{attrs:{label:"Número"},model:{value:t.num_comprobante,callback:function(e){t.num_comprobante=e},expression:"num_comprobante"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm8:"",md8:"",lg8:"",xl8:""}},[o("v-select",{attrs:{items:t.clientes,label:"Cliente"},model:{value:t.idcliente,callback:function(e){t.idcliente=e},expression:"idcliente"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[o("v-text-field",{attrs:{type:"number",label:"Impuesto"},model:{value:t.impuesto,callback:function(e){t.impuesto=e},expression:"impuesto"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm8:"",md8:"",lg8:"",xl8:""}},[o("v-text-field",{attrs:{label:"Código"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.buscarCodigo()}},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[o("v-btn",{attrs:{small:"",fab:"",dark:"",color:"teal"},on:{click:function(e){t.mostrarArticulos()}}},[o("v-icon",{attrs:{dark:""}},[t._v("list")])],1)],1),t._v(" "),t.errorArticulo?o("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[o("div",{staticClass:"red--text",domProps:{textContent:t._s(t.errorArticulo)}})]):t._e(),t._v(" "),o("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[o("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[o("td",[t._v(t._s(e.item.articulo))]),t._v(" "),o("td",[o("v-text-field",{attrs:{type:"number"},model:{value:e.item.cantidad,callback:function(a){t.$set(e.item,"cantidad",a)},expression:"props.item.cantidad"}})],1),t._v(" "),o("td",[o("v-text-field",{attrs:{type:"number"},model:{value:e.item.precio,callback:function(a){t.$set(e.item,"precio",a)},expression:"props.item.precio"}})],1),t._v(" "),o("td",[o("v-text-field",{attrs:{type:"number"},model:{value:e.item.descuento,callback:function(a){t.$set(e.item,"descuento",a)},expression:"props.item.descuento"}})],1),t._v(" "),o("td",[t._v("$ "+t._s(e.item.cantidad*e.item.precio-e.item.descuento))])]}}])},[o("template",{slot:"no-data"},[o("h3",[t._v("No hay artículos agregados al detalle.")])])],2),t._v(" "),o("v-flex",{staticClass:"text-xs-right"},[o("strong",[t._v("Total Parcial:")]),t._v("\n            $ "+t._s(t.totalParcial=(t.total-t.totalImpuesto).toFixed(2))+"\n          ")]),t._v(" "),o("v-flex",{staticClass:"text-xs-right"},[o("strong",[t._v("Total Impuesto:")]),t._v("\n            $ "+t._s(t.totalImpuesto=(t.total*t.impuesto/100).toFixed(2))+"\n          ")]),t._v(" "),o("v-flex",{staticClass:"text-xs-right"},[o("strong",[t._v("Total Neto:")]),t._v("\n            $ "+t._s(t.total=t.calcularTotal.toFixed(2))+"\n          ")])],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},t._l(t.validaMensaje,(function(e){return o("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})}))),t._v(" "),o("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[o("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(e){t.ocultarNuevo()}}},[t._v("Cerrar")]),t._v(" "),0==t.verDet?o("v-btn",{attrs:{color:"success"},on:{click:function(e){t.guardar()}}},[t._v("Guardar")]):t._e()],1)],1)],1):t._e()],1)],1)},se=[],re={data:function(){return{ventas:[],dialog:!1,headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Usuario",value:"usuario"},{text:"Cliente",value:"cliente"},{text:"Comprobante",value:"tipo_comprobante"},{text:"Serie",value:"serie_comprobante",sortable:!1},{text:"Número",value:"num_comprobante",sortable:!1},{text:"Fecha",value:"fecha_hora",sortable:!1},{text:"Impuesto",value:"impuesto",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"Estado",value:"estado",sortable:!1}],cabeceraDetalles:[{text:"Artículo",value:"articulo",sortable:!1},{text:"Cantidad",value:"cantidad",sortable:!1},{text:"Precio",value:"precio",sortable:!1},{text:"Descuento",value:"descuento",sortable:!1},{text:"Subtotal",value:"subtotal",sortable:!1}],detalles:[],search:"",id:"",idcliente:"",clientes:[],tipo_comprobante:"",comprobantes:["Factura","Boleta","Ticket"],serie_comprobante:"",num_comprobante:"",impuesto:21,codigo:"",verNuevo:0,errorArticulo:null,totalParcial:0,totalImpuesto:0,total:0,cabeceraArticulos:[{text:"Seleccionar",value:"seleccionar",sortable:!1},{text:"Artículo",value:"articulo"},{text:"Categoría",value:"categoria"},{text:"Descripción",value:"descripcion",sortable:!1},{text:"Stock",value:"stock",sortable:!1},{text:"Precio Venta",value:"precio_venta",sortable:!1}],articulos:[],texto:"",verArticulos:0,verDet:0,valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:"",comprobanteModal:0,cliente:"",fecha_hora:"",num_documento:"",direccion:"",telefono:"",email:"",fechaInicio:(new Date).toISOString().substr(0,10),fechaFin:(new Date).toISOString().substr(0,10)}},computed:{calcularTotal:function(){for(var t=0,e=0;e<this.detalles.length;e++)t+=this.detalles[e].precio*this.detalles[e].cantidad-this.detalles[e].descuento;return t}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar(),this.select()},methods:{crearPDF:function(){var t=document.getElementById("factura");Xt()(t).then((function(t){var e=t.toDataURL("image/png"),a=210,o=t.height*a/t.width,i=new ct.a,s=0;i.addImage(e,"PNG",0,s,a,o),i.save("Comprobante_venta.pdf")}))},mostrarComprobante:function(t){this.limpiar(),this.tipo_comprobante=t.tipo_comprobante,this.serie_comprobante=t.serie_comprobante,this.num_comprobante=t.num_comprobante,this.cliente=t.cliente,this.num_documento=t.num_documento,this.direccion=t.direccion,this.telefono=t.telefono,this.email=t.email,this.fecha_hora=t.fecha_hora,this.impuesto=t.impuesto,this.listarDetalles(t.idventa),this.comprobanteModal=1},ocultarComprobante:function(){this.comprobanteModal=0,this.limpiar()},mostrarNuevo:function(){this.verNuevo=1},ocultarNuevo:function(){this.verNuevo=0,this.limpiar()},agregarDetalle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.errorArticulo=null,this.encuentra(t["idarticulo"])?this.errorArticulo="El artículo ya ha sido agregado.":this.detalles.push({idarticulo:t["idarticulo"],articulo:t["nombre"],cantidad:1,precio:t["precio_venta"],descuento:0})},encuentra:function(t){for(var e=0,a=0;a<this.detalles.length;a++)this.detalles[a].idarticulo==t&&(e=1);return e},listar:function(){var t=this,e={Authorization:"Bearer "+this.$store.state.token},a={headers:e},o="";o=t.fechaInicio&&t.fechaFin?"api/Ventas/ConsultaFechas/"+t.fechaInicio+"/"+t.fechaFin:"api/Ventas/Listar",K.a.get(o,a).then((function(e){t.ventas=e.data})).catch((function(t){console.log(t)}))},listarDetalles:function(t){var e=this,a={Authorization:"Bearer "+this.$store.state.token},o={headers:a};K.a.get("api/Ventas/ListarDetalles/"+t,o).then((function(t){e.detalles=t.data})).catch((function(t){console.log(t)}))},verDetalles:function(t){this.limpiar(),this.tipo_comprobante=t.tipo_comprobante,this.serie_comprobante=t.serie_comprobante,this.num_comprobante=t.num_comprobante,this.idcliente=t.idcliente,this.impuesto=t.impuesto,this.listarDetalles(t.idventa),this.verNuevo=1,this.verDet=1},select:function(){var t=this,e=[],a={Authorization:"Bearer "+this.$store.state.token},o={headers:a};K.a.get("api/Personas/SelectClientes",o).then((function(a){e=a.data,e.map((function(e){t.clientes.push({text:e.nombre,value:e.idpersona})}))})).catch((function(t){console.log(t)}))},limpiar:function(){this.id="",this.idcliente="",this.tipo_comprobante="",this.serie_comprobante="",this.num_comprobante="",this.impuesto="21",this.codigo="",this.detalles=[],this.total=0,this.totalImpuesto=0,this.totalParcial=0,this.verDet=0}}},ne=re,le=(a("9a49"),Object(V["a"])(ne,ie,se,!1,null,null,null)),ce=le.exports,de=a("2f62"),ve=a("04e1"),ue=a.n(ve);o["default"].use(de["a"]);var me=new de["a"].Store({state:{token:null,usuario:null},mutations:{setToken:function(t,e){t.token=e},setUsuario:function(t,e){t.usuario=e}},actions:{guardarToken:function(t,e){var a=t.commit;a("setToken",e),a("setUsuario",ue()(e)),localStorage.setItem("token",e)},autoLogin:function(t){var e=t.commit,a=localStorage.getItem("token");a&&(e("setToken",a),e("setUsuario",ue()(a))),he.push({name:"home"})},salir:function(t){var e=t.commit;e("setToken",null),e("setUsuario",null),localStorage.removeItem("token"),he.push({name:"login"})}}});o["default"].use(Y["a"]);var _e=new Y["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:X,meta:{administrador:!0,almacenero:!0,vendedor:!0}},{path:"/categorias",name:"categorias",component:st,meta:{administrador:!0,almacenero:!0}},{path:"/articulos",name:"articulos",component:mt,meta:{administrador:!0,almacenero:!0}},{path:"/ingresos",name:"ingresos",component:Ht,meta:{administrador:!0,almacenero:!0}},{path:"/roles",name:"roles",component:xt,meta:{administrador:!0}},{path:"/usuarios",name:"usuarios",component:jt,meta:{administrador:!0}},{path:"/clientes",name:"clientes",component:St,meta:{administrador:!0,vendedor:!0}},{path:"/ventas",name:"ventas",component:oe,meta:{administrador:!0,vendedor:!0}},{path:"/consultas",name:"consultas",component:ce,meta:{administrador:!0}},{path:"/proveedores",name:"proveedores",component:Et,meta:{administrador:!0,almacenero:!0}},{path:"/login",name:"login",component:Yt,meta:{libre:!0}}]});_e.beforeEach((function(t,e,a){t.matched.some((function(t){return t.meta.libre}))?a():me.state.usuario&&"Administrador"==me.state.usuario.rol?t.matched.some((function(t){return t.meta.administrador}))&&a():me.state.usuario&&"Almacenero"==me.state.usuario.rol?t.matched.some((function(t){return t.meta.almacenero}))&&a():me.state.usuario&&"Vendedor"==me.state.usuario.rol?t.matched.some((function(t){return t.meta.vendedor}))&&a():a({name:"login"})}));var he=_e,pe=a("c1df"),fe=a.n(pe);o["default"].config.productionTip=!1,o["default"].prototype.moment=fe.a,K.a.defaults.baseURL="https://localhost:44388/",new o["default"]({router:he,store:me,render:function(t){return t(U)}}).$mount("#app")},"9a49":function(t,e,a){"use strict";var o=a("5437"),i=a.n(o);i.a},b260:function(t,e,a){},cf05:function(t,e,a){t.exports=a.p+"dist/img/logo.978a7dfc.png"}});
//# sourceMappingURL=app.dad1be0c.js.map